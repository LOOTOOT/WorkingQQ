<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>付QQ的最终幻想</title>

    <!-- 引入 Tailwind CSS 进行现代UI设计 -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 引入 Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- 引入 FontAwesome 图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- 引入 Animate.css 动画库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <!-- 引入 Confetti 特效库 -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- 引入 Alpine.js 用于状态管理 -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bgMain: '#FFFBF8',
                        bgSec: '#FFCCB6',
                        accent: '#D8F878',
                        wechatGreen: '#95EC69'
                    },
                    fontFamily: {
                        sans: ['"Noto Sans SC"', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* 全局样式覆盖 */
        body {
            background-color: #FFFBF8;
            color: #333;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        /* 隐藏滚动条但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* PS5 登录波纹特效 */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(216, 248, 120, 0.4);
            transform: scale(0);
            animation: ripple-anim 0.6s linear;
            pointer-events: none;
        }

        @keyframes ripple-anim {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* 闪光特效 */
        .flash-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: white;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            z-index: 100;
        }

        /* 苹果风格卡片玻璃态 */
        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* 聊天气泡箭头 */
        .bubble-left::before {
            content: "";
            position: absolute;
            left: -8px; top: 12px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid white;
        }
        .bubble-right::before {
            content: "";
            position: absolute;
            right: -8px; top: 12px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 8px solid #95EC69;
        }

        /* 呼吸字特效 */
        @keyframes breathe {
            0% { opacity: 0.3; text-shadow: 0 0 5px rgba(216,248,120,0.2); }
            50% { opacity: 1; text-shadow: 0 0 20px rgba(216,248,120,0.8); }
            100% { opacity: 0.3; text-shadow: 0 0 5px rgba(216,248,120,0.2); }
        }
        .breathing-text {
            animation: breathe 2.5s infinite ease-in-out;
        }
    </style>
</head>
<body x-data="gameData()" x-init="initAudio()" class="h-screen w-screen relative font-sans">

    <!-- 背景装饰 (仅在非全屏图片时显示) -->
    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden">
        <div class="absolute -top-20 -right-20 w-64 h-64 bg-bgSec/30 rounded-full blur-3xl"></div>
        <div class="absolute top-1/2 -left-20 w-80 h-80 bg-accent/20 rounded-full blur-3xl"></div>
    </div>

    <!-- 全局闪光层 -->
    <div class="flash-overlay" :style="flash ? 'opacity:1' : 'opacity:0'"></div>

    <!-- 1. 登录页面 -->
    <section x-show="scene === 'login'" x-transition.opacity.duration.500ms class="absolute inset-0 z-10 flex flex-col items-center justify-center">
        <!-- 阶段1: 文字 -->
        <div x-show="loginStep === 0" x-transition:enter="animate__animated animate__fadeIn" x-transition:leave="animate__animated animate__fadeOut" class="text-2xl font-light text-gray-500 tracking-widest">
            请登录
        </div>

        <!-- 阶段2: 头像 -->
        <div x-show="loginStep === 1" x-transition:enter="animate__animated animate__fadeIn" class="relative group cursor-pointer" @click="handleLogin($event)">
            <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-xl transform transition duration-300 group-hover:scale-105 group-hover:shadow-2xl relative z-10">
                <img :src="assets.avatar" alt="User Avatar" class="w-full h-full object-cover">
            </div>
            <div class="mt-6 text-center text-gray-700 font-medium">付QQ</div>
        </div>

        <!-- 阶段3: 成功 -->
        <div x-show="loginStep === 2" class="text-2xl font-bold text-accent drop-shadow-md animate__animated animate__fadeInUp">
            登入成功
        </div>
    </section>

    <!-- 2. 游戏主页 -->
    <section x-show="scene === 'home'" x-transition.opacity.duration.800ms class="absolute inset-0 z-10 w-full h-full bg-black cursor-pointer" @click="startGame()">
        <img :src="assets.mainPage" class="w-full h-full object-cover opacity-90" alt="Main Page">
        <div class="absolute inset-0 flex items-center justify-center bg-black/20">
            <p class="text-white text-xl font-light tracking-[0.2em] breathing-text bg-black/30 px-6 py-2 rounded-full backdrop-blur-sm">
                点击任意地方开始做梦
            </p>
        </div>
    </section>

    <!-- 3. 故事叙述页 -->
    <section x-show="scene === 'story'" class="absolute inset-0 z-10 flex flex-col bg-bgMain">
        <!-- 上半部分：图片展示区 -->
        <div class="relative w-full h-[55%] bg-gray-100 overflow-hidden shadow-lg rounded-b-3xl">
            <img :src="currentStoryImage"
                 :class="{'animate__animated animate__shakeX': shakeEffect}"
                 class="w-full h-full object-cover transition-all duration-500"
                 alt="Story Scene">

            <!-- 粒子消散文字特效层 (简化模拟) -->
            <div x-show="showIntroText" class="absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-20" @click="nextIntro()">
                <p x-text="introLines[introIndex]" class="text-white text-2xl font-bold text-center px-4 animate__animated animate__fadeIn"></p>
            </div>
        </div>

        <!-- 下半部分：文字与选项区 -->
        <div class="flex-1 p-6 flex flex-col justify-between relative">
            <div class="glass-card p-5 rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-300 min-h-[120px] mb-4">
                <h3 class="text-gray-400 text-xs font-bold mb-2 uppercase tracking-wide">Story</h3>
                <p class="text-lg text-gray-800 leading-relaxed font-medium" x-html="currentStoryText"></p>
            </div>

            <div class="space-y-3 pb-6">
                <template x-for="(option, index) in currentOptions" :key="index">
                    <button @click="makeChoice(option.next)"
                            class="w-full py-4 px-6 rounded-xl bg-white border border-bgSec/50 shadow-sm text-gray-700 font-medium
                                   hover:bg-gradient-to-r hover:from-bgMain hover:to-bgSec/30 hover:scale-[1.02] hover:shadow-lg hover:border-accent
                                   active:scale-95 transition-all duration-200 flex items-center justify-between group">
                        <span x-text="option.text"></span>
                        <i class="fas fa-chevron-right text-gray-300 group-hover:text-amber-500 transition-colors"></i>
                    </button>
                </template>
            </div>
        </div>
    </section>

    <!-- 4. 微信聊天页 -->
    <section x-show="scene === 'chat'" class="absolute inset-0 z-10 flex flex-col bg-[#EDEDED]">
        <!-- 顶栏 -->
        <div class="h-14 bg-[#F7F7F7] flex items-center justify-between px-4 border-b border-gray-300 shadow-sm z-20 sticky top-0">
            <div class="flex items-center text-gray-800">
                <i class="fas fa-chevron-left text-lg mr-4"></i>
                <span class="font-medium text-lg">钥匙老师 (CPU版)</span>
            </div>
            <i class="fas fa-ellipsis-h text-gray-800"></i>
        </div>

        <!-- 消息区 -->
        <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar">
            <template x-for="(msg, index) in chatHistory" :key="index">
                <div class="w-full flex" :class="msg.isMe ? 'justify-end' : 'justify-start'">

                    <!-- 对方头像 -->
                    <img x-show="!msg.isMe" :src="assets.teacherAvatar" class="w-10 h-10 rounded-md mr-3 border border-gray-200 shadow-sm">

                    <!-- 消息气泡 -->
                    <div class="relative max-w-[70%] p-3 rounded-md shadow-sm text-[15px] leading-relaxed break-words"
                         :class="msg.isMe ? 'bg-[#95EC69] text-black bubble-right' : 'bg-white text-black bubble-left'">
                        <span x-text="msg.text"></span>
                    </div>

                    <!-- 我的头像 -->
                    <img x-show="msg.isMe" :src="assets.avatar" class="w-10 h-10 rounded-md ml-3 border border-gray-200 shadow-sm">
                </div>
            </template>
             <!-- 对方正在输入占位符 -->
             <div x-show="isTyping" class="w-full flex justify-start animate__animated animate__fadeIn">
                <img :src="assets.teacherAvatar" class="w-10 h-10 rounded-md mr-3">
                <div class="bg-white p-3 rounded-md shadow-sm text-gray-400 bubble-left">
                    <i class="fas fa-circle text-[8px] animate-bounce"></i>
                    <i class="fas fa-circle text-[8px] animate-bounce delay-100"></i>
                    <i class="fas fa-circle text-[8px] animate-bounce delay-200"></i>
                </div>
            </div>
        </div>

        <!-- 底部输入框 (伪装) -->
        <div class="h-14 bg-[#F7F7F7] border-t border-gray-300 flex items-center px-3 gap-3 sticky bottom-0 z-20">
            <i class="far fa-keyboard text-gray-600 text-2xl"></i>
            <div class="flex-1 h-9 bg-white rounded-md border border-gray-200"></div>
            <i class="far fa-smile text-gray-600 text-2xl"></i>
            <i class="fas fa-plus-circle text-gray-600 text-2xl"></i>
        </div>

        <!-- 聊天选项覆盖层 -->
        <div x-show="showChatOptions" class="absolute bottom-16 left-0 right-0 p-4 z-30 animate__animated animate__slideInUp">
            <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl p-4 border border-white/50">
                <p class="text-sm text-gray-500 mb-3 text-center">选择回复</p>
                <div class="space-y-3">
                    <template x-for="(opt, idx) in chatOptions" :key="idx">
                        <button @click="handleChatChoice(opt)" class="w-full py-3 bg-gradient-to-r from-bgMain to-bgSec/20 rounded-xl text-gray-800 font-medium border border-bgSec/50 active:scale-95 transition-transform" x-text="opt.text"></button>
                    </template>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. 结局页面 -->
    <section x-show="scene === 'ending'" x-transition.opacity.duration.2000ms class="absolute inset-0 z-10 flex flex-col items-center justify-center bg-bgMain text-center p-6">
        <div class="relative w-full max-w-md aspect-square mb-8 rounded-full overflow-hidden shadow-2xl border-8 border-white animate-float">
            <img :src="assets.birthday" class="w-full h-full object-cover" alt="Happy Birthday">
        </div>

        <h1 class="text-4xl font-bold text-gray-800 mb-4 animate__animated animate__fadeInDown">Happy Birthday!</h1>
        <h2 class="text-2xl text-accent font-bold mb-6 bg-black/5 px-4 py-1 rounded inline-block">付QQ</h2>

        <div class="glass-card p-6 rounded-2xl max-w-xs mx-auto mb-8 animate__animated animate__fadeInUp">
            <p class="text-gray-600 leading-relaxed" x-text="endingText"></p>
        </div>

        <button @click="location.reload()" class="px-8 py-3 bg-accent text-gray-800 font-bold rounded-full shadow-lg hover:shadow-accent/50 transform transition hover:-translate-y-1">
            再做一次梦
        </button>
    </section>

    <!-- 音频元素 -->
    <audio id="bgm" loop>
        <!-- 使用在线生日歌资源 -->
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <script>
        // GitHub 资源基础路径 (使用 jsDelivr CDN 加速 raw.githubusercontent.com)
        const REPO_BASE = "https://cdn.jsdelivr.net/gh/LOOTOOT/WorkingQQ@main/";
        // 用于绕过可能的中文编码问题，尽量使用英文文件名，这里对中文进行编码处理
        const getUrl = (filename) => `${REPO_BASE}${encodeURIComponent(filename)}`;

        function gameData() {
            return {
                scene: 'login', // login, home, story, chat, ending
                loginStep: 0,
                flash: false,
                shakeEffect: false,

                // 故事状态
                introLines: [
                    "你是付QQ，23英语2班的班长。",
                    "AAA纯血正宗PPT大王AKA导员免费劳动力",
                    "现在是北京时间12月7日，早上8点20分\n你正在享受美好的周末"
                ],
                introIndex: 0,
                showIntroText: false,
                currentStoryImage: '',
                currentStoryText: '',
                currentOptions: [],

                // 聊天状态
                chatHistory: [
                    { isMe: false, text: "付QQ你怎么敢挂老师电话？" },
                    { isMe: false, text: "太不像话了！" }
                ],
                isTyping: false,
                showChatOptions: false,
                chatOptions: [],
                endingText: '',

                // 资源字典
                assets: {
                    avatar: getUrl("fqq-avtar.jpg"),
                    teacherAvatar: getUrl("img-left.jpg"),
                    mainPage: getUrl("mainpage.jpg"),
                    sleeping: getUrl("sleeping.png"),
                    calling: getUrl("付QQ接电话无语.png"),
                    angry: getUrl("我骟QQ彻底怒了.png"),
                    godMode: getUrl("付QQ神威大发.png"),
                    stepKey: getUrl("付QQ脚踩金钥.png"), // 假设文件名
                    victory: getUrl("付QQ战斗胜利结算画面.png"),
                    pcWork: getUrl("晕头转向电脑局.png"),
                    wakeUp: getUrl("躺在床上睁眼的付QQ.png"),
                    birthday: getUrl("付QQHappyBirthday.png")
                },

                initAudio() {
                    // 初始化音频上下文防止自动播放策略限制
                    document.body.addEventListener('click', () => {
                        // 在实际交互中播放
                    }, { once: true });
                },

                // 1. 登录逻辑
                init() {
                    setTimeout(() => { this.loginStep = 0; }, 500);
                    setTimeout(() => { this.loginStep = 1; }, 2500); // 2秒显示文字后显示头像
                },

                handleLogin(e) {
                    // 涟漪特效
                    const ripple = document.createElement('div');
                    ripple.className = 'ripple';
                    const rect = e.currentTarget.getBoundingClientRect();
                    ripple.style.left = `${e.clientX - rect.left}px`;
                    ripple.style.top = `${e.clientY - rect.top}px`;
                    e.currentTarget.appendChild(ripple);

                    // 1秒后闪光
                    setTimeout(() => {
                        this.flash = true;
                        setTimeout(() => this.flash = false, 500);
                        this.loginStep = 2; // 显示成功

                        setTimeout(() => {
                            this.scene = 'home';
                        }, 1500);
                    }, 600);
                },

                // 2. 开始游戏
                startGame() {
                    this.scene = 'story';
                    this.currentStoryImage = this.assets.sleeping;
                    this.showIntroText = true;
                    this.introIndex = 0;
                },

                nextIntro() {
                    if (this.introIndex < this.introLines.length - 1) {
                        this.introIndex++;
                    } else {
                        // 介绍结束，进入第一题
                        this.showIntroText = false;
                        this.shakeEffect = true; // 页面震动
                        setTimeout(() => this.shakeEffect = false, 1000);
                        this.loadStoryNode('phone_rings');
                    }
                },

                // 故事节点管理
                loadStoryNode(nodeId) {
                    // 简单的状态机
                    const nodes = {
                        'phone_rings': {
                            image: this.assets.sleeping,
                            text: '<strong>一阵强劲的音乐袭来！</strong><br>是你的QQ电话响了呢，你决定...',
                            options: [
                                { text: 'A1. 谁啊？接一下吧', next: 'pickup' },
                                { text: 'B1. 都衮，没人能阻止我睡觉', next: 'end_sleep' }
                            ]
                        },
                        'pickup': {
                            image: this.assets.calling,
                            text: '「喂，老师。」<br>手机传来你导员的声音<br>「付QQ你现在做一个优秀班集体的PPT，下午4点前给我。」<br>………什么玩意儿？做PPT？你...',
                            options: [
                                { text: 'A2. 怒了，拒绝', next: 'angry' },
                                { text: 'B2. 已老实，一会儿就去做', next: 'slave' }
                            ]
                        },
                        'angry': {
                            image: this.assets.angry,
                            text: '大早上做什么PPT？你彻底怒了。<br>往日种种在眼前浮现，你忍无可忍，速速动手。<br>手机传来导员低沉的声音：「付QQ你怎么和老师说话的？」',
                            options: [
                                { text: 'A3. 我现在就这个态度，不爱听别听', next: 'fight_back_1' },
                                { text: 'B3. 对不起老师我刚刚没睡醒', next: 'slave' }
                            ]
                        },
                        'fight_back_1': {
                            image: this.assets.godMode,
                            text: '电话那头安静如鸡，随后一声怒吼：「付QQ！」<br>你毫不示弱：「吼那么大声干嘛？现在是周末！我还在睡觉！」<br>导员：「你是班长，要有奉献精神！」',
                            options: [
                                { text: 'A4. 奉献精神？那你给我发工资了吗？', next: 'fight_salary' },
                                { text: 'B4. 这班长谁爱当谁当，我不干了！', next: 'fight_quit' }
                            ]
                        },
                        'fight_salary': {
                            image: this.assets.stepKey,
                            text: '「你给我工资了吗要求这么多？我白干这么久还没找你算账呢！」<br>「啪！」你直接挂了电话。怼得你神清气爽。',
                            options: [ { text: '查看微信消息', next: 'goto_chat_a' } ]
                        },
                        'fight_quit': {
                            image: this.assets.stepKey,
                            text: '「没什么好说的，我受够了。再见。」<br>「啪！」你干脆利落地挂了电话。',
                            options: [ { text: '查看微信消息', next: 'goto_chat_a' } ]
                        },
                        'slave': {
                            image: this.assets.pcWork,
                            text: '你叹了口气：「好的老师，我尽快做」。<br>中午煮了火鸡面，边吃边做...<br>你苦笑一下，关掉电脑。',
                            options: [ { text: '躺回床上', next: 'end_reality' } ]
                        }
                    };

                    const node = nodes[nodeId];
                    if(node) {
                        this.currentStoryImage = node.image;
                        this.currentStoryText = node.text;
                        this.currentOptions = node.options;
                    }
                },

                makeChoice(nextId) {
                    if (nextId === 'end_sleep') {
                        this.triggerEnding('sleep');
                    } else if (nextId === 'end_reality') {
                        this.triggerEnding('reality');
                    } else if (nextId.startsWith('goto_chat')) {
                        // 进入微信环节
                        this.currentStoryImage = this.assets.victory; // 结算画面
                        setTimeout(() => this.startChat(), 1000); // 延迟一点看结算图
                    } else {
                        this.loadStoryNode(nextId);
                    }
                },

                // 3. 聊天逻辑
                startChat() {
                    this.scene = 'chat';
                    // 延迟显示选项
                    setTimeout(() => {
                        this.showChatOptions = true;
                        this.chatOptions = [
                            { text: 'A5. （继续输出）我就这样，怎么着？', type: 'fight' },
                            { text: 'B5. （无视）已读不回', type: 'ignore' }
                        ];
                    }, 1000);
                },

                handleChatChoice(opt) {
                    this.showChatOptions = false;
                    this.chatHistory.push({ isMe: true, text: opt.text.split('）')[1] || opt.text }); // 简单的文本处理

                    if (opt.type === 'fight') {
                        // 追击
                        setTimeout(() => this.chatHistory.push({ isMe: true, text: "你自己怎么不做？就知道使唤学生？" }), 800);
                        setTimeout(() => {
                            this.isTyping = true;
                            setTimeout(() => {
                                this.isTyping = false;
                                this.chatHistory.push({ isMe: false, text: "你这样态度有问题，我要跟你家长谈谈！" });
                                setTimeout(() => this.chatHistory.push({ isMe: true, text: "谈啊，说我在学校被当免费劳动力" }), 1000);
                                setTimeout(() => {
                                    // 模拟撤回
                                    this.isTyping = true;
                                    setTimeout(() => {
                                        this.isTyping = false;
                                        this.chatHistory.push({ isMe: false, text: "算了，你冷静一下。PPT我找别人做。" });
                                        setTimeout(() => this.triggerEnding('victory_fight'), 2000);
                                    }, 2000);
                                }, 2000);
                            }, 1500);
                        }, 1500);
                    } else {
                        // 无视
                        setTimeout(() => {
                             this.isTyping = true;
                             setTimeout(() => {
                                this.isTyping = false;
                                this.chatHistory.push({ isMe: false, text: "？" });
                                setTimeout(() => this.chatHistory.push({ isMe: false, text: "付QQ，看到回复。" }), 1000);
                                setTimeout(() => {
                                    this.chatHistory.push({ isMe: false, text: "行，你厉害。PPT不用你做了。" });
                                    setTimeout(() => this.triggerEnding('victory_ignore'), 2000);
                                }, 2500);
                             }, 1500);
                        }, 1000);
                    }
                },

                // 4. 结局逻辑
                triggerEnding(type) {
                    const audio = document.getElementById('bgm');
                    // 注意：实际项目中需要一个真实的生日歌mp3地址，这里使用了一个占位符
                    // 尝试播放音乐 (如果用户之前有过交互，浏览器会允许)
                    audio.play().catch(e => console.log("Audio play failed, user interaction needed"));

                    this.scene = 'ending';

                    if (type === 'sleep') {
                        this.endingText = "你舒服地翻了个身，沉沉睡去。没有电话，没有PPT，只有惬意的休息。虽然是一场梦，但爽是真的。";
                    } else if (type === 'reality') {
                        this.endingText = "原来……是一场梦啊。虽然在梦里也被CPU了，但那都是假的。嘿，今天是你生日，开心一点吧！";
                    } else {
                        // 猛人线
                        this.endingText = "原来……是一场梦啊。但不得不说，骂得真爽。虽然梦是假的，但爽是真的！";
                    }

                    // 撒花
                    const duration = 5000;
                    const end = Date.now() + duration;

                    (function frame() {
                        confetti({
                            particleCount: 5,
                            angle: 60,
                            spread: 55,
                            origin: { x: 0 },
                            colors: ['#D8F878', '#FFCCB6', '#FFF']
                        });
                        confetti({
                            particleCount: 5,
                            angle: 120,
                            spread: 55,
                            origin: { x: 1 },
                            colors: ['#D8F878', '#FFCCB6', '#FFF']
                        });

                        if (Date.now() < end) {
                            requestAnimationFrame(frame);
                        }
                    }());
                }
            }
        }
    </script>
</body>
</html>